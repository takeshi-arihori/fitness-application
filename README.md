# fitness-application

## 機能要件
1. 日記エントリ管理
### 日記エントリ:

- ユーザーは、日々の食事や運動を記録するための日記エントリを作成できます。
- 各エントリはユーザーと紐付けられており、日付は UTC で保存されます。
- フィールド: `user_id, date(UTC)`

2. レシピ管理
### レシピ:

- ユーザーは、複数の食材で構成されるレシピを作成・管理できます。
- レシピには名前と作成日が含まれます。
- フィールド: name, creation_date

### レシピ中間テーブル:

- このテーブルは、レシピと食材の関係を管理し、どのレシピにどの食材が含まれているかを示します。
- フィールド: recipe_id, food_id
- 1 対多の関係: 1 つのレシピに対して複数の食材が含まれます。

3. 運動管理
### 運動:

- ユーザーは、運動の種類や時間を指定して、行った運動を記録できます。
- フィールドは記録する運動の種類に基づいて定義されます。

### 運動の種類:

- ユーザーが運動を記録する際に選択できる異なる運動の種類。
- フィールド: 運動の種類（例: 有酸素運動、筋力トレーニング）

### 運動タグ:

- 運動を分類するためのタグで、食材タグと同様です。
- フィールド: タグ（例: 高強度、低負荷）

4. 日記レシピ項目管理
### 日記レシピ項目:

- ユーザーは、日記エントリーにレシピを追加し、そのレシピに含まれる食材を消費したことを記録できます。

5. 日記のファイル保存
### プライベート画像保存:

- ユーザーが日記にリマインダーとして写真をアップロードできる機能を追加します。
- 画像はプライベートに保存され、ユーザーのみが閲覧できるようにします。
- プライベートアクセス設定を利用してファイルを保存します。


## デプロイ
Docker + NGINX + AWS + CI/CD
- アプリケーションを AWS などのクラウドプラットフォームにデプロイします。
- GitHub Actions を使用して、CI/CD を導入し、スムーズなデプロイと更新を行います。
- Docker を使ってアプリケーションをコンテナ化します。
- SSL 証明書を使って安全な接続を確保します。
- NGINX サーバのルールを設定します。


## サブスクリプション管理
### Stripe と Cashier の統合:

- Laravel Cashier を利用して Stripe でのサブスクリプションモデルを実装します。
- isSubscribed というミドルウェアを作成し、ユーザーがサブスクリプションに加入しているかを確認します。
- このミドルウェアをサブスクリプションが必要なコントローラやルートに適用します。
- サブスクリプションプランを開発し、アプリケーション内でユーザーのサブスクリプションを管理します。
- ユーザーには 2 週間の無料トライアルが提供され、その後はサブスクリプションに加入しないとアプリケーションの利用が続けられません。

## カスタマーサポート
### Reverb WebSockets を使ったサポート:

- リアルタイムでのカスタマーサポートを提供するために、Reverb WebSockets を統合します。
- ユーザーがサポートリクエストを開始し、リアルタイムでサポートエージェントとチャットできるようにします。

## 技術要件
### フロントエンド:
- Next.js
- TypeScript

### バックエンド:
- Laravel11

### インフラ
- Docker
- AWS ECS on Fargate

### データベース:
RDS(AWS)

ユーザー、食材、レシピ、運動、日記データの保存に MySQL を使用します。
効率的なデータ取得のために適切なインデックスを設定します。

### ファイルストレージ:

ユーザーの日記にアップロードされたプライベート画像のファイル保存を設定します。

## 非機能要件
### パフォーマンス:

- アプリケーションのロード時間を最適化し、インタラクションが迅速であることを確保します。
- 大量のデータやユーザーインタラクションに対して効率的に対応します。

### セキュリティ:

- 本番環境ではすべての接続に HTTPS を使用します。
- バックエンドで全てのユーザー入力を検証します。
- 強力な認証・認可制御を実装します。
- 機密データは暗号化して保護します。
